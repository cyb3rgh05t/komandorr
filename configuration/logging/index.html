<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=cyb3rgh05t><link href=https://cyb3rgh05t.github.io/komandorr/configuration/logging/ rel=canonical><link rel="shortcut icon" href=../../img/favicon.ico><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>Enhanced Logging Configuration - Komandorr Documentation</title><link href=../../css/bootstrap-3.3.7.min.css rel=stylesheet><link href=../../css/font-awesome-4.7.0.css rel=stylesheet><link href=../../css/base.css rel=stylesheet><link rel=stylesheet href=../../css/highlight.css><link href=../../css/timeago.css rel=stylesheet><link href=../../stylesheets/extra.css rel=stylesheet><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]--><script src=../../js/jquery-3.2.1.min.js></script><script src=../../js/bootstrap-3.3.7.min.js></script><script src=../../js/highlight.pack.js></script><base target=_top><script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Enhanced Logging Configuration", url: "#_top", children: [
              {title: "Features", url: "#features" },
              {title: "Log Levels", url: "#log-levels" },
              {title: "Environment Variables", url: "#environment-variables" },
              {title: "Usage Examples", url: "#usage-examples" },
              {title: "Configuration Examples", url: "#configuration-examples" },
              {title: "Console Output Examples", url: "#console-output-examples" },
              {title: "File Output Examples", url: "#file-output-examples" },
              {title: "Log File Management", url: "#log-file-management" },
              {title: "Troubleshooting", url: "#troubleshooting" },
              {title: "Best Practices", url: "#best-practices" },
              {title: "Migration from Old Logger", url: "#migration-from-old-logger" },
              {title: "Dependencies", url: "#dependencies" },
          ]},
        ];

    </script><script src=../../js/base.js></script><script src=../../js/timeago.min.js></script><script src=../../js/timeago_mkdocs_material.js></script><script src=../../javascripts/extra.js></script><script src=../../search/main.js></script></head> <body> <script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script> <div class="container-fluid wm-page-content"> <a name=_top></a> <h1 id=enhanced-logging-configuration>Enhanced Logging Configuration<a class=headerlink href=#enhanced-logging-configuration title="Permanent link">&para;</a></h1> <p>The Komandorr project now features an enhanced logging system with beautiful colored console output and detailed file logging.</p> <h2 id=features>Features<a class=headerlink href=#features title="Permanent link">&para;</a></h2> <p>‚ú® <strong>Cross-platform colored output</strong> using <code>colorama</code><br> üìù <strong>Detailed file logging</strong> with timestamps and module information<br> üé® <strong>Visual log levels</strong> with emoji icons and colors<br> ‚öôÔ∏è <strong>Highly configurable</strong> via environment variables<br> üîç <strong>Multiple log levels</strong> (DEBUG, INFO, WARNING, ERROR, CRITICAL)<br> üìä <strong>Separate formatting</strong> for console and file output</p> <h2 id=log-levels>Log Levels<a class=headerlink href=#log-levels title="Permanent link">&para;</a></h2> <p>The logging system supports five standard log levels:</p> <table> <thead> <tr> <th>Level</th> <th>Icon</th> <th>Color</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>DEBUG</strong></td> <td>üîç</td> <td>Cyan</td> <td>Detailed diagnostic information for debugging</td> </tr> <tr> <td><strong>INFO</strong></td> <td>‚ÑπÔ∏è</td> <td>Green</td> <td>General informational messages about normal operation</td> </tr> <tr> <td><strong>WARNING</strong></td> <td>‚ö†Ô∏è</td> <td>Yellow</td> <td>Warning messages for unusual but non-critical events</td> </tr> <tr> <td><strong>ERROR</strong></td> <td>‚ùå</td> <td>Red</td> <td>Error events that may still allow the application to continue</td> </tr> <tr> <td><strong>CRITICAL</strong></td> <td>üö®</td> <td>Magenta</td> <td>Severe errors that may cause application failure</td> </tr> </tbody> </table> <h2 id=environment-variables>Environment Variables<a class=headerlink href=#environment-variables title="Permanent link">&para;</a></h2> <p>Configure the logging behavior using these environment variables:</p> <h3 id=core-settings>Core Settings<a class=headerlink href=#core-settings title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-bash># Set the minimum logging level (default: INFO)
LOG_LEVEL=DEBUG|INFO|WARNING|ERROR|CRITICAL

# Path to the log file (default: logs/komandorr.log)
LOG_FILE=logs/komandorr.log

# Enable or disable file logging (default: true)
LOG_TO_FILE=true|false

# Timezone for timestamps (default: UTC)
TZ=America/New_York
# or
TIMEZONE=Europe/London</code></pre> <h3 id=console-output-settings>Console Output Settings<a class=headerlink href=#console-output-settings title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-bash># Show emoji icons in console output (default: true)
LOG_SHOW_ICONS=true|false

# Show timestamp in console output (default: false)
# Note: File logs always include timestamps
LOG_SHOW_TIMESTAMP=true|false</code></pre> <h3 id=file-output-settings>File Output Settings<a class=headerlink href=#file-output-settings title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-bash># Include module/function names in file logs (default: true)
LOG_FILE_INCLUDE_LOCATION=true|false</code></pre> <h2 id=usage-examples>Usage Examples<a class=headerlink href=#usage-examples title="Permanent link">&para;</a></h2> <h3 id=basic-logging>Basic Logging<a class=headerlink href=#basic-logging title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-python>from app.utils.logger import logger

# Different log levels
logger.debug("Detailed debugging information")
logger.info("Application started successfully")
logger.warning("Configuration value is deprecated")
logger.error("Failed to connect to database")
logger.critical("System is shutting down")</code></pre> <h3 id=logging-with-exception-traceback>Logging with Exception Traceback<a class=headerlink href=#logging-with-exception-traceback title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-python>from app.utils.logger import logger

try:
    # Some code that might fail
    result = risky_operation()
except Exception as e:
    logger.exception("Operation failed")
    # This logs the full traceback automatically</code></pre> <h3 id=dynamic-log-level-changes>Dynamic Log Level Changes<a class=headerlink href=#dynamic-log-level-changes title="Permanent link">&para;</a></h3> <pre class=highlight><code class=language-python>from app.utils.logger import logger

# Change log level at runtime
logger.set_level("DEBUG")
logger.debug("This will now be shown")

logger.set_level("WARNING")
logger.info("This will be hidden")
logger.warning("This will be shown")</code></pre> <h2 id=configuration-examples>Configuration Examples<a class=headerlink href=#configuration-examples title="Permanent link">&para;</a></h2> <h3 id=development-environment>Development Environment<a class=headerlink href=#development-environment title="Permanent link">&para;</a></h3> <p>For development, you might want verbose console output with debug information:</p> <pre class=highlight><code class=language-bash># .env
LOG_LEVEL=DEBUG
LOG_SHOW_ICONS=true
LOG_SHOW_TIMESTAMP=false
LOG_TO_FILE=true
LOG_FILE_INCLUDE_LOCATION=true</code></pre> <h3 id=production-environment>Production Environment<a class=headerlink href=#production-environment title="Permanent link">&para;</a></h3> <p>For production, you might want minimal console output with detailed file logs:</p> <pre class=highlight><code class=language-bash># .env
LOG_LEVEL=INFO
LOG_SHOW_ICONS=false
LOG_SHOW_TIMESTAMP=true
LOG_TO_FILE=true
LOG_FILE_INCLUDE_LOCATION=true
TZ=UTC</code></pre> <h3 id=docker-environment>Docker Environment<a class=headerlink href=#docker-environment title="Permanent link">&para;</a></h3> <p>When running in Docker, you might disable file logging and rely on Docker's logging:</p> <pre class=highlight><code class=language-bash># docker-compose.yml environment
LOG_LEVEL=INFO
LOG_TO_FILE=false
LOG_SHOW_ICONS=true
LOG_SHOW_TIMESTAMP=false</code></pre> <h2 id=console-output-examples>Console Output Examples<a class=headerlink href=#console-output-examples title="Permanent link">&para;</a></h2> <h3 id=default-output-with-icons>Default Output (with icons)<a class=headerlink href=#default-output-with-icons title="Permanent link">&para;</a></h3> <pre class=highlight><code>üîç DEBUG - Initializing database connection
‚ÑπÔ∏è  INFO - Server started on port 8000
‚ö†Ô∏è  WARNING - API rate limit approaching
‚ùå ERROR - Failed to fetch user data
üö® CRITICAL - Database connection lost</code></pre> <h3 id=without-icons>Without Icons<a class=headerlink href=#without-icons title="Permanent link">&para;</a></h3> <pre class=highlight><code>DEBUG - Initializing database connection
INFO - Server started on port 8000
WARNING - API rate limit approaching
ERROR - Failed to fetch user data
CRITICAL - Database connection lost</code></pre> <h3 id=with-timestamps>With Timestamps<a class=headerlink href=#with-timestamps title="Permanent link">&para;</a></h3> <pre class=highlight><code>2025-11-13 14:30:15 - ‚ÑπÔ∏è  INFO - Server started on port 8000
2025-11-13 14:30:16 - ‚ö†Ô∏è  WARNING - API rate limit approaching</code></pre> <h2 id=file-output-examples>File Output Examples<a class=headerlink href=#file-output-examples title="Permanent link">&para;</a></h2> <h3 id=standard-file-format>Standard File Format<a class=headerlink href=#standard-file-format title="Permanent link">&para;</a></h3> <pre class=highlight><code>2025-11-13 14:30:15 - INFO     - Server started on port 8000
2025-11-13 14:30:16 - WARNING  - API rate limit approaching
2025-11-13 14:30:17 - ERROR    - Failed to fetch user data</code></pre> <h3 id=with-location-information>With Location Information<a class=headerlink href=#with-location-information title="Permanent link">&para;</a></h3> <pre class=highlight><code>2025-11-13 14:30:15 - INFO     - [komandorr:main:45] - Server started on port 8000
2025-11-13 14:30:16 - WARNING  - [komandorr:api.services:123] - API rate limit approaching
2025-11-13 14:30:17 - ERROR    - [komandorr:api.plex:89] - Failed to fetch user data</code></pre> <h2 id=log-file-management>Log File Management<a class=headerlink href=#log-file-management title="Permanent link">&para;</a></h2> <h3 id=location>Location<a class=headerlink href=#location title="Permanent link">&para;</a></h3> <p>By default, logs are stored in:</p> <pre class=highlight><code>backend/logs/komandorr.log</code></pre> <p>You can customize this with the <code>LOG_FILE</code> environment variable.</p> <h3 id=rotation>Rotation<a class=headerlink href=#rotation title="Permanent link">&para;</a></h3> <p>To implement log rotation, you can use external tools:</p> <h4 id=using-logrotate-linux>Using logrotate (Linux)<a class=headerlink href=#using-logrotate-linux title="Permanent link">&para;</a></h4> <p>Create <code>/etc/logrotate.d/komandorr</code>:</p> <pre class=highlight><code>/path/to/komandorr/backend/logs/*.log {
    daily
    rotate 14
    compress
    delaycompress
    notifempty
    create 0644 user user
    sharedscripts
    postrotate
        # Send SIGHUP to reload logs if needed
    endscript
}</code></pre> <h4 id=manual-rotation>Manual Rotation<a class=headerlink href=#manual-rotation title="Permanent link">&para;</a></h4> <pre class=highlight><code class=language-bash># Archive current log
mv logs/komandorr.log logs/komandorr.$(date +%Y%m%d).log

# Compress old logs
gzip logs/komandorr.*.log

# Remove logs older than 30 days
find logs/ -name "komandorr.*.log.gz" -mtime +30 -delete</code></pre> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=no-console-colors-on-windows>No Console Colors on Windows<a class=headerlink href=#no-console-colors-on-windows title="Permanent link">&para;</a></h3> <p>If you don't see colors on Windows, ensure:</p> <ol> <li>You're using a modern terminal (Windows Terminal, PowerShell 7+)</li> <li>Colorama is properly installed: <code>pip install colorama</code></li> <li>ANSI escape codes are enabled in your terminal</li> </ol> <h3 id=file-logging-not-working>File Logging Not Working<a class=headerlink href=#file-logging-not-working title="Permanent link">&para;</a></h3> <p>If logs aren't being written to file:</p> <ol> <li>Check permissions on the logs directory</li> <li>Ensure <code>LOG_TO_FILE=true</code> is set</li> <li>Check the console for permission warnings</li> <li>Verify the <code>LOG_FILE</code> path is valid</li> </ol> <h3 id=missing-log-levels>Missing Log Levels<a class=headerlink href=#missing-log-levels title="Permanent link">&para;</a></h3> <p>If certain log levels aren't showing:</p> <ol> <li>Check your <code>LOG_LEVEL</code> setting</li> <li>Remember that setting level to <code>WARNING</code> hides <code>DEBUG</code> and <code>INFO</code></li> <li>Console and file handlers both respect the global log level</li> </ol> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <ol> <li> <p><strong>Use appropriate log levels</strong></p> </li> <li> <p><code>DEBUG</code>: Only for development and troubleshooting</p> </li> <li><code>INFO</code>: Normal application flow events</li> <li><code>WARNING</code>: Unexpected but handled situations</li> <li><code>ERROR</code>: Errors that are caught and handled</li> <li> <p><code>CRITICAL</code>: Severe errors requiring immediate attention</p> </li> <li> <p><strong>Include context in log messages</strong></p> </li> </ol> <pre class=highlight><code class=language-python># Good
logger.info(f"User {user_id} logged in from {ip_address}")

# Less helpful
logger.info("User logged in")</code></pre> <ol> <li><strong>Use exception logging for errors</strong></li> </ol> <pre class=highlight><code class=language-python># Good - includes full traceback
try:
    risky_function()
except Exception as e:
    logger.exception("Failed to execute risky function")

# Less helpful - no traceback
try:
    risky_function()
except Exception as e:
    logger.error(f"Error: {str(e)}")</code></pre> <ol> <li><strong>Don't log sensitive information</strong></li> </ol> <pre class=highlight><code class=language-python># Bad - logs password
logger.info(f"User login: {username}:{password}")

# Good - no sensitive data
logger.info(f"User login attempt: {username}")</code></pre> <ol> <li><strong>Use structured logging for complex data</strong> <pre class=highlight><code class=language-python># For complex data, log in a structured way
logger.info(f"API request completed: method={method}, endpoint={endpoint}, status={status}, duration={duration}ms")</code></pre></li> </ol> <h2 id=migration-from-old-logger>Migration from Old Logger<a class=headerlink href=#migration-from-old-logger title="Permanent link">&para;</a></h2> <p>The new enhanced logger is backward compatible. No code changes are required for existing usage:</p> <pre class=highlight><code class=language-python># This still works exactly the same
from app.utils.logger import logger

logger.info("Application started")
logger.error("Something went wrong")</code></pre> <p>The only differences are:</p> <ul> <li>Better colored output in console</li> <li>More detailed file logging</li> <li>Additional configuration options via environment variables</li> <li>New <code>exception()</code> method for logging with tracebacks</li> <li>New <code>set_level()</code> method for dynamic level changes</li> </ul> <h2 id=dependencies>Dependencies<a class=headerlink href=#dependencies title="Permanent link">&para;</a></h2> <p>The enhanced logging system requires:</p> <ul> <li><code>colorama&gt;=0.4.6</code> - Cross-platform colored terminal output</li> </ul> <p>This is automatically included in <code>requirements.txt</code>.</p> <br> <br> </div> <footer class="col-md-12 wm-page-content"> <p> <a href=https://github.com/cyb3rgh05t/komandorr/edit/main/docs/configuration/logging.md>Edit on cyb3rgh05t/komandorr</a> </p><p>Copyright &copy; 2024-2025 cyb3rgh05t</p> <p>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a> using <a href=https://github.com/cyb3rgh05t/komandorr>Windmill Dark</a> theme by cyb3rgh05t (noraj).</p> </footer> </body> </html>